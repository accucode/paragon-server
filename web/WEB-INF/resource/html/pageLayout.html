<!DOCTYPE html>

<!--
Application: ${applicationName}
Version: ${applicationVersion}
-->

<html lang="en">
<head>
    <title>${title}</title>

    <meta http-equiv="Content-Type"     content="text/html; charset=UTF-8">
    <meta http-equiv="Cache-Control"    content="no-cache">
    <meta http-equiv="Pragma"           content="no-cache">
    <meta http-equiv="Expires"          content="-1">

    <!-- reset -->
    <link rel="stylesheet" type="text/css" href="/static/${versionFolder}/app/common/css/reset.css">

    <link href="https://fonts.googleapis.com/css?family=Roboto:100,100i,300,300i,400,400i,500,500i,700,700i,900,900i" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

    <!-- jquery (not deferred) -->
    <script src="/static/${versionFolder}/jquery/core/jquery-1.10.2.min.js"></script>
    <script src="/static/${versionFolder}/jquery/core/jquery-migrate-1.2.1.min.js"></script>

    <!-- jquery ui -->
    <link rel="stylesheet" type="text/css" href="/static/${versionFolder}/jquery/jquery-ui-1.11.4/jquery-ui.min.css">
    <script defer src="/static/${versionFolder}/jquery/jquery-ui-1.11.4/jquery-ui.min.js"></script>

    <!-- color picker -->
    <link rel="stylesheet" type="text/css" href="/static/${versionFolder}/jquery/colorpicker-09.05.23/css/colorpicker.css">
    <script defer src="/static/${versionFolder}/jquery/colorpicker-09.05.23/js/colorpicker.js"></script>

    <!-- flexigrid -->
    <link rel="stylesheet" type="text/css" href="/static/${versionFolder}/jquery/flexigrid-1.1/css/flexigrid.pack.css">
    <script defer src="/static/${versionFolder}/jquery/flexigrid-1.1/js/flexigrid.js"></script>

    <!-- akquinet toasts -->
    <link rel="stylesheet" type="text/css" href="/static/${versionFolder}/jquery/akquinet-0.2.0-13/resources/css/jquery.toastmessage.css">
    <script defer src="/static/${versionFolder}/jquery/akquinet-0.2.0-13/javascript/jquery.toastmessage.js"></script>

    <!-- cl editor -->
    <!-- "/static/${versionFolder}/jquery/cleditor-1.4.3/jquery.cleditor.css", -->
    <!-- "/static/${versionFolder}/jquery/cleditor-1.4.3/jquery.cleditor.min.js"></script> -->

    <!-- block ui -->
    <script defer src="/static/${versionFolder}/jquery/blockUi-2.64.0/jquery.blockUI.js"></script>

    <!-- cookie -->
    <script defer src="/static/${versionFolder}/jquery/js-cookie-2.1.0/js.cookie.js"></script>

    <!-- transit -->
    <script defer src="/static/${versionFolder}/jquery/transit-0.9.9/jquery.transit-0.9.9.min.js"></script>

    <!-- dropzone -->
    <!--
    <link rel="stylesheet" type="text/css" href="/static/${versionFolder}/dropzone-3.6.1/dropzone.css">
    <script defer src="/static/${versionFolder}/dropzone-3.6.1/dropzone.js"></script>
    -->
    <link rel="stylesheet" type="text/css" href="/static/${versionFolder}/dropzone-4.3.0/dropzone.css">
    <script defer src="/static/${versionFolder}/dropzone-4.3.0/dropzone.js"></script>

    <!-- json -->
    <script defer src="/static/${versionFolder}/json-2010.11.18/json2.js"></script>

    <!-- Code39 Azalea
    -->
    <link rel="stylesheet" type="text/css" href="/static/${versionFolder}/azaleaCode39/Code39Azalea.css">
    <!--
    <style>
        @font-face
        {
            font-family: Code39AzaleaFont;
            src: url('/static/${versionFolder}/azaleaCode39/Code39Azalea.eot') format('embedded-opentype'), /* IE9 Compat Modes */
               url('/static/${versionFolder}/azaleaCode39/Code39Azalea.woff') format('woff'), /* Modern Browsers */
               url('/static/${versionFolder}/azaleaCode39/Code39Azalea.ttf') format('truetype'), /* Safari, Android, iOS */
               url('/static/${versionFolder}/azaleaCode39/Code39Azalea.svg#Code39Azalea') format('svg'); /* Legacy iOS */
            font-weight: normal;
            font-style: normal;
        }
    </style>
    -->

    <!-- history -->
    <script defer src="/static/${versionFolder}/jquery/history-1.8.6/scripts/bundled-uncompressed/html5/jquery.history.js"></script>

    <!-- scroll to -->
    <script defer src="/static/${versionFolder}/jquery/scrollto-1.4.3.1/jquery.scrollTo-1.4.3.1-min.js"></script>

    <!-- visible -->
    <script defer src="/static/${versionFolder}/jquery/jquery-visible-master/jquery.visible.js"></script>

    <!-- splitter -->
    <link rel="stylesheet" type="text/css" href="/static/${versionFolder}/jquery/jcubic-splitter-0.14.0/css/jquery.splitter.css">
    <script defer src="/static/${versionFolder}/jquery/jcubic-splitter-0.14.0/js/jquery.splitter-0.14.0.js"></script>


    <!-- nvd3 charts 1.1.10 -->
    <!--
    <link rel="stylesheet" type="text/css" href="/static/${versionFolder}/nvd3-1.1.10/src/nv.d3.css">
    <script defer src="/static/${versionFolder}/nvd3-1.1.10/lib/d3.v3.js"></script>
    <script defer src="/static/${versionFolder}/nvd3-1.1.10/nv.d3.js"></script>
    <script defer src="/static/${versionFolder}/nvd3-1.1.10/src/tooltip.js"></script>
    <script defer src="/static/${versionFolder}/nvd3-1.1.10/src/utils.js"></script>
    <script defer src="/static/${versionFolder}/nvd3-1.1.10/src/interactiveLayer.js"></script>
    <script defer src="/static/${versionFolder}/nvd3-1.1.10/src/models/legend.js"></script>
    <script defer src="/static/${versionFolder}/nvd3-1.1.10/src/models/axis.js"></script>
    <script defer src="/static/${versionFolder}/nvd3-1.1.10/src/models/line.js"></script>
    <script defer src="/static/${versionFolder}/nvd3-1.1.10/src/models/lineChart.js"></script>
    -->

    <!-- nvd3 charts 1.8.1 -->
    <link rel="stylesheet" type="text/css" href="/static/${versionFolder}/nvd3-1.8.1/nv.d3.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.2/d3.js"></script>
    <script defer src="/static/${versionFolder}/nvd3-1.8.1/nv.d3.js"></script>




    <!-- ckEditor -->
    <script defer src="/static/${versionFolder}/ckeditor-4.5.11/ckeditor.js"></script>
    <script defer src="/static/${versionFolder}/ckeditor-4.5.11/adapters/jquery.js"></script>

    <!-- moment -->
    <script defer src="/static/${versionFolder}/moment/moment-2.14.1.min.js"></script>
    <script defer src="/static/${versionFolder}/moment/moment-timezone-with-data-0.5.5.js"></script>

    <!-- full calendar 2.x
    <link rel="stylesheet" type="text/css" href="/static/${versionFolder}/fullcalendar-2.4.0/fullcalendar.min.css">
    <script defer src="/static/${versionFolder}/fullcalendar-2.4.0/fullcalendar.min.js"></script>
    -->

    <!-- full calendar 3.x -->
    <link rel="stylesheet" type="text/css" href="/static/${versionFolder}/fullcalendar-3.0.0/fullcalendar.min.css">
    <script defer src="/static/${versionFolder}/fullcalendar-3.0.0/fullcalendar.min.js"></script>

    <!-- html2canvas -->
    <script defer src="/static/version/html2canvas-0.5.0-a1/html2canvas.js"></script>

    <!-- popr -->
    <!--
    We use popr.styl instead, which is included in the application stylus theme.
    <link rel="stylesheet" type="text/css" href="/static/${versionFolder}/jquery/popr-1.0.0/popr.css">
    -->
    <script src="/static/${versionFolder}/jquery/popr-1.0.0/popr.js"></script>

    <!-- chosen -->
    <link rel="stylesheet" type="text/css" href="/static/${versionFolder}/jquery/chosen-1.8.5/chosen.css">
    <script src="/static/${versionFolder}/jquery/chosen-1.8.5/chosen.jquery.js"></script>

    <!-- type watch -->
    <script src="/static/${versionFolder}/jquery/typeWatch-170928/jquery.typewatch.js"></script>

    <!-- google map api -->
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyD_WTy8rgoCU_yoGesX86t7tfpDyGsQWjw" async defer></script>

    <!-- kodemore -->
    <script defer src="/static/${versionFolder}/app/common/script/kmExtensions.js"></script>
    <script defer src="/static/${versionFolder}/app/common/script/kmu.js"></script>
    <script defer src="/static/${versionFolder}/app/common/script/kmNavigator.js"></script>
    <script defer src="/static/${versionFolder}/app/common/script/kmDropdownMenu.js"></script>
    <script defer src="/static/${versionFolder}/app/common/script/kmTimeAgo.js"></script>
    <script defer src="/static/${versionFolder}/app/common/script/kmDateAgo.js"></script>
    <script defer src="/static/${versionFolder}/app/common/script/kmClock.js"></script>
    <script defer src="/static/${versionFolder}/app/common/script/kmAutoRun.js"></script>

    <!-- app -->
    <link rel="stylesheet" type="text/css" media="screen" href="/static/${versionFolder}/app/theme/${themeToken}/css/theme.css">
    <link rel="stylesheet" type="text/css" media="print"  href="/static/${versionFolder}/app/theme/print/css/theme.css">


    <script type="text/javascript">

        $(function()
        {
            $('#pageLoadMessage').remove();

            Dropzone.autoDiscover = false;

            Kmu.applicationVersion = "${applicationVersion}";
            KmDropdownMenu.installAutoClose();
            KmTimeAgo.init();
            KmClock.init();
            KmAutoRun.init();
            Kmu.initTooltip();

            initNavigator();
            initJumpToMenu();
            // initResize();
        });

        function initNavigator()
        {
            KmNavigator.defaultTitle = "${loadingTabTitle}";
            KmNavigator.init();
            KmNavigator.updatePageSession("${initialPageSession}");
            KmNavigator.pushPage({url: "${query}", title: "${title}"});
        }

        function initJumpToMenu()
        {
            document.addEventListener("keydown", function(ev)
            {
                // alt-slash
                if ( ev.altKey && ev.which == 191 )
                {
                    var field;
                    field = $('#${pageMenuFieldId}');
                    field.val('');
                    field.focus();
                }
            });
        }

        function initResize()
        {
            $(window).resize(function()
            {
                var w = window.innerWidth
                    || document.documentElement.clientWidth
                    || document.body.clientWidth;

                var h = window.innerHeight
                    || document.documentElement.clientHeight
                    || document.body.clientHeight;

                console.log('innerSize = ' + w + ' x ' + h);
            });
        }

    </script>

    <style type="text/css">
        #pageLoadMessage
        {
            font: italic bold 16px sans-serif;
            position: fixed;
            left:   0;
            right:  0;
            top:    0;
            height: 30px;
            padding: 10px;
            background-color: #aaa;
            z-index: 9999999;
        }
    </style>
${oneAllHead}
</head>

<body class="${bodyClass}">
    <div id="pageLoadMessage">
       ${applicationName}, loading...
    </div>

    <!-- This is used by kmu.js => warnIfDirty() -->
    <div id="warnIfDirtyDialog" title="Unsaved Changes!" style="display:none">
        You have unsaved changes!
    </div>

    <!-- This is used by kmu.js => confirmAndThen() -->
    <div id="confirmDialog" title="Confirm?" style="display:none">
        <span id="confirmDialogMessage"></span>
    </div>

    <!-- This is used by kmu.js => showNotice() -->
    <div id="noticeDialog" title="Notice..." style="display:none">
        <span id="noticeDialogMessage"></span>
    </div>

    <!-- This is used by kmu.js => showAjaxError() -->
    <div id="ajaxDialog" title="Ajax Message..." style="display:none">
        <span id="ajaxDialogMessage"></span>
    </div>

    <!-- This is used by kmu.js => showAjaxError() -->
    <div id="timeoutDialog" title="Session Timeout" style="display:none">
        <span>
            Your session has expired, or the application has been updated.
            Please click 'Refresh' to continue.
        </span>
    </div>

    ${html}

    <div id="sizeBox"></div>
</body>
</html>
